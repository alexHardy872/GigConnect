

@model GigConnect.Models.ViewModels.VenueIndexViewModel

<h2>@Model.venue.venueName</h2>


<div class="container">
    <div class="row">
        <div class="col-md-4">

        </div>
        <div class="col-md-4">

        </div>
        <div class="col-md-4">

        </div>
    </div>
</div>




<div class="optionsContainer">

    <div class="optionsHeader" id="showGigs"><div class="txtBtn">Gigs</div></div>

    <div class="optionsHeader" id="showVenues"><div class="txtBtn">Gigs</div></div>

    <div class="optionsHeader" id="showMessages"><div class="txtBtn">Messages</div></div>

    <div class="optionsHeader" id="showRequests"><div class="txtBtn">Pending Requests</div></div>

</div>

<div id="messages">
    <div class="twoOptionsHeader">
        <button id="showInbox" class="twoOptionsBtn" style=" height: 40px; width: 45%;font-weight: bold;">INBOX</button>
        <button id="showOutbox" class="twoOptionsBtn" style=" height: 40px; width: 45%; ">OUTBOX</button>
    </div>
    <div id="inbox">
        @if (Model.messagesIn.Count == 0)
        {
            <div><span>NO MESSAGES IN INBOX</span></div>
        }
        else
        {
            <table class="table">
                <tr>
                    <td>DATE</td>
                    <td>TIME</td>
                    <td>FROM</td>
                    <td>MESSAGE</td>
                    <td>ACTIONS</td>
                </tr>
                @foreach (var message in Model.messagesIn)
                {
                    if (message.read == false)
                    {
                        <tr>
                            <td> @message.timeStamp.Date </td>
                            <td> @message.timeStamp.TimeOfDay:</td>
                            <td style="font-weight: bold;">@message.Band.bandName:</td>
                            <td>@message.messageContent</td>
                            <td>
                                <button style="background-color: black;">@Html.ActionLink("Reply", "Create", "Message", new { recipientId = message.Band.BandId, isBand = true }, null)</button>
                                <button style="background-color: black;">@Html.ActionLink("Mark Read", "ToggleRead", "Message", new { messageId = message.MessageId }, null)</button>
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr style="color: gray">
                            <td> @message.timeStamp.Date </td>
                            <td> @message.timeStamp.TimeOfDay:</td>
                            <td style="font-weight: bold;">@message.Band.bandName:</td>
                            <td>@message.messageContent</td>
                            <td>
                                <button style="background-color: black;">@Html.ActionLink("Reply", "Create", "Message", new { recipientId = message.Band.BandId, isBand = true }, null)</button>
                                <button style="background-color: black;">@Html.ActionLink("Mark Unread", "ToggleRead", "Message", new { messageId = message.MessageId }, null)</button>
                            </td>
                        </tr>
                    }
                }
            </table>
        }
    </div>

    <div id="outbox" style="display: none;">
        @if (Model.messagesOut.Count == 0)
        {
            <div><span>NO MESSAGES SENT</span></div>
        }
        else
        {
            <table class="table">
                <tr>
                    <td>DATE</td>
                    <td>TIME</td>
                    <td>TO</td>
                    <td>MESSAGE</td>
                    <td>ACTIONS</td>
                </tr>
                @foreach (var message in Model.messagesOut)
                {
                    <tr style="color: gray">
                        <td> @message.timeStamp.Date </td>
                        <td> @message.timeStamp.TimeOfDay:</td>
                        <td style="font-weight: bold;">@message.Band.bandName:</td>
                        <td>@message.messageContent</td>
                        <td>
                            <button style="background-color: black;">@Html.ActionLink("Send Another?", "Create", "Message", new { recipientId = message.Venue.VenueId, isBand = false }, null)</button>
                        </td>
                    </tr>

                }
            </table>
        }
    </div>








    <div id="gigList">
        <h3>Upcoming Gigs</h3>
        <table class="table">
            <tr>
                <th> Venue </th>
                <th> Date</th>
                <th> Time </th>
                <th> Line-up </th>
                <th></th>
            </tr>

            @foreach (var gigModel in Model.currentGigs)
            {

                <tr>

                    <td>
                        @Html.ActionLink(gigModel.gig.Venue.venueName, "ViewVenueProfile", "ProfileView", new { venueId = gigModel.gig.Venue.VenueId }, null),
                    </td>
                    <td>  @Html.DisplayFor(modelItem => gigModel.gig.timeOfGig.Date)  </td>
                    <td>  @Html.DisplayFor(modelItem => gigModel.gig.timeOfGig.TimeOfDay)  </td>

                    <td>

                        @foreach (var band in gigModel.bands)
                        {

                            <span>
                                @Html.ActionLink(band.bandName, "ViewBandProfile", "ProfileView", new { bandId = band.BandId }, null),
                            </span>
                        }
                    </td>
                    <td>
                       <button class="btn-default">@Html.ActionLink("Edit",".../Gig/Edit", new {gigId = gigModel.gig.GigId })</button> 
                    </td>
                </tr>
            }

        </table>
    </div>



</div>



<script>
    document.addEventListener('DOMContentLoaded', function () {



        (function ($) {





            $("#showInbox").click(function () {
                console.log("Handler for .click() called.");
                $("#inbox").show()
                $("#outbox").hide();
                $(this).css("font-weight", "bold");
                $("#showOutbox").css("font-weight", "normal");
            });
            $("#showInbox").mouseenter(function () {
                $(this).css("background-image", "linear-gradient(white, black)");

            });
            $("#showInbox").mouseleave(function () {
                $(this).css("background-image", "none");

            });

            $("#showOutbox").click(function () {
                console.log("Handler for .click() called.");
                $("#inbox").hide()
                $("#outbox").show();
                $(this).css("font-weight", "bold");
                $("#showInbox").css("font-weight", "normal");
            });
            $("#showOutbox").mouseenter(function () {
                $(this).css("background-image", "linear-gradient(white, black)");

            });
            $("#showOutbox").mouseleave(function () {
                $(this).css("background-image", "none");

            });




        })(jQuery);

    });
</script>