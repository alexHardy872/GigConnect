@model GigConnect.Models.ViewModels.BandProfileViewModel

@{
    ViewBag.Title = "ViewBandProfile";
}


<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div id="leftComp" style="display: inline-block">
                <div id="bandInfo">
                    <h1>@Model.band.bandName - @Model.band.town</h1>
                    <br />

                    <a href="@Model.band.bandWebsite">Band Website</a>

                    <br />
                    @if (Model.facebookImageUrl == "Error: No Token or facebook id")
                    {
                        <img src="~/Content/Images/profile.jpg" alt="pic" style="height: 300px; width: 300px;" />

                    }
                    else
                    {
                        <img src="@Model.facebookImageUrl" alt="pic" style="height: 300px; width: 300px;" />

                    }
                    <button>@Html.ActionLink("Send a Message", "Create", "Message", new { recipientId = Model.band.BandId, isBand = true }, null)</button>

                </div>

                <div id="ratings">

                    <h4>Reviews</h4>
                    @if (Model.reviews.Count == 0)
                    {
                        <p> This band does not have any reviews yet.. @Html.ActionLink("Be the first!", "Create", "Review", new { reviewedId = Model.band.BandId, isBand = true }, null)</p>
                    }
                    else
                    {
                        <span id="score">Average rating (@Model.score/4) </span><button class="btn-default">@Html.ActionLink("Write a Review", "Create", "Review", new { reviewedId = Model.band.BandId, isBand = true }, null)</button>

                        <table class="table">
                            @foreach (var review in Model.reviews)
                            {
                                <tr>
                                    <td><strong>@review.rating</strong></td>
                                    <td>@review.content</td>
                                </tr>
                            }
                        </table>
                    }

                </div>
            </div>



        </div>
    </div>
</div>








<div id="Gigs">
    <table class="table">
        <tr>
            <td>Date</td>
            <td>Time</td>
            <td>Venue</td>
            <td>Bands</td>
            <td>Address</td>

        </tr>
        @foreach (var gig in Model.gigs)
        {
    <tr>
        <td>@gig.gig.timeOfGig.Date</td>
        <td>@gig.gig.timeOfGig.TimeOfDay</td>
        <td>@gig.gig.Venue.venueName</td>
        <td>@gig.bands</td>
       
        @foreach(var band in gig.bands){
            
            @Html.ActionLink(band.bandName, "ViewBandProfile", "ProfileView", new { bandId = band.BandId },null)
        }
        <td>(@gig.formattedAddress)</td>
    </tr>

        }
    </table>

</div>


<div id="socialContainer" style="display: flex; justify-content: space-between;">


   

    <div id="twitterPosts" style="height: 700px; width: 370px; background-color: deepskyblue; text-align: center; border-radius: 15px; ">
        <h2 style="color: white;">twitter</h2>
        <div class="postScroller" style="overflow-y: scroll; overflow-x: hidden; width: 360px; max-height: 650px; background-color: white; display: inline-block; ">

            <a class="twitter-timeline" href="https://twitter.com/@Model.band.Social.twitterHandle?ref_src=twsrc%5Etfw">Tweets by @Model.band.bandName</a>



        </div>
    </div>

    <div id="facebookPosts" style="height: 700px; width: 370px; background-color: darkblue; text-align: center; border-radius: 15px; ">
        <h2 style="color: white;">facebook</h2>
        <div class="postScroller" style="overflow-y: scroll; overflow-x: hidden; max-width: 360px; max-height: 650px; background-color: white; display: inline-block; ">

            @if (Model.facebookPermalinks.Count == 0)
            {
                <div class="postContainer">
                    <h3 style="color: red;">Facebook Token Exipred</h3>
                </div>
            }
            else
            {
                foreach (var permaLink in Model.facebookPermalinks)
                {
                    <div class="postContainer">
                        <div class="fb-post" data-href="@permaLink" data-width="330">
                        </div>
                    </div>
                }
            }
        </div>
    </div>

</div>

<div id="youtubeVids" style="height: 300px; width: 1200px; background-color: red; text-align: center; border-radius: 15px;">
    <h2 style="color: white;">Youtube Videos</h2>
    <div class="postScroller" style=" overflow-y: hidden;  max-height: 280px; background-color: white; display: inline-block; ">

        @foreach (var videoUrl in Model.youtubeUrls)
        {
        <div style="display: inline-block;">
            <iframe width="250" height="200" src="@videoUrl" frameborder="0" allowfullscreen></iframe>
        </div>
        }

    </div>
</div>




<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script async defer src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        (function ($) {



       





        })(jQuery);
    });
</script>

